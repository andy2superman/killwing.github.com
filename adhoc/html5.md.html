<!DOCTYPE html>
<html>
<title>HTML5</title>
<xmp theme="united" style="display:none;">
## [fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)
`window.fetch(url)`返回一个Promise对象，resolve时传入Reponse对象，`response.json()`返回另一个Promise对象，relove时传入json数据。
eg: `fetch("http://www.weather.com.cn/data/cityinfo/101010100.html").then(res => res.json()).then(d => console.log(d))`

* fetch 请求默认是不带 cookie 的，需要设置`fetch(url, {credentials: 'include'})`
* 返回400，500错误码时并不会 reject，只有网络错误这些导致请求失败时，fetch 才会被 reject。

Headers:
`new Headers({'Content-Type': 'application/json', 'Cache-Control': 'max-age=3600'})`

Request:
fetch默认'GET'一个url字符串，也接受一个Request对象：`new Request(URL, {method: 'POST', cache: 'reload', headers: h})`。

* Request也可以基于已有Request对象创建。
* 可以用Headers对象设置请求头部。

Response:
`new Response(data, {status: 200, headers: h})`

* Response中的headers是只读的。
* 浏览器中构造的Reponse对象不能发送出去，但可以通过Service Worker发送给自己。
* 使用`response.body.getReader()`读取流。

## [Service Worker]()

## Reference
https://www.html5rocks.com

</xmp>
<script src="../js/strapdown.js"></script>
</html>
